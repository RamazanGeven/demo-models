#VRML V2.0 utf8

# VRML 2.0 lights demo
# We have three lights : point light (the red one; has position),
# spot light (the blue one; has position AND direction) and
# directional light (green one; has only direction).
#
# We can see the same scene duplicated three times.
# The left one is illuminated by the point light and spot light.
# The middle one is illuminated only by the directional light.
# And the right one is illuminated by all three kinds of lights.
#
# You can use color modulators in view3dscene to view separate lights.
# (view only one color channel). You can also use built-in raytracer
# in view3dscene (use "classic" raytracer for this model)
# to render view of this model with shadows.

# VRML 2.0 notes:
# - In VRML 2.0, positional lights affect everything within their radius,
#   regardless of position in VRML node hierarchy. So I had to set appropriate
#   radius for them and make the three object instances far away to actually
#   make this test accurate (otherwise e.g. point light from leftmost instance
#   would illuminate also middle and rightmost instance).
# - I use "ambientIntensity 1" for evey light to make this look the same
#   as VRML 1.0 analogous file. In VRML 1.0 ambientIntensity is taken from
#   intensity, and default intensity is 1. In VRML 2.0 default ambientIntensity
#   is 0. So lights in VRML 2.0 by default are darker (and usually better-looking,
#   actually) than VRML 1.0.

NavigationInfo { headlight FALSE }

# Camera settings "encoded" in the VRML declaration below :
# direction -0.001740425010212 -0.029249431565404 -0.113615833222866
# up -0.003818256547675 0.968430042266846 -0.249255642294884
# gravityUp 0 1 0
Viewpoint {
  position 43.164356231689453 15.558923721313477 69.951637268066406
  orientation -0.998149335384369 0.060339916497469 0.007452552206814 0.25240433216095
}

Switch {
  choice [
    # setup point light
    DEF LightPointPos Shape {
      geometry PointSet {
        coord Coordinate { point 10 0 0 }
        color Color { color 1 0 0 }
      }
    }

    DEF LightPoint PointLight {
      ambientIntensity 1
      location 10 0 0
      color 1 0 0
      radius 20
    }

    # setup spot light
    DEF LightSpotPos Shape {
      geometry PointSet {
        coord Coordinate { point 4 1.6 1 }
        color Color { color 0 0 1 }
      }
    }

    DEF LightSpot SpotLight {
      ambientIntensity 1
      location 4 1.6 1
      direction -0.2 0 -1
      color 0 0 1
      cutOffAngle 0.1
      radius 20
    }

    # setup directional light
    DEF LightDir DirectionalLight {
      ambientIntensity 1
      color 0 1 0
      direction 1 0 -1
    }

    DEF Objects Group {
      children [
        Shape {
          appearance Appearance { material Material { diffuseColor 1 1 1 } }
          geometry Cylinder { }
        }
        Transform {
          translation 4 0 0
          children Shape {
            appearance
              DEF DefLitAppearance Appearance { material Material { } }
            geometry Box { }
          }
        }

        Transform {
          translation 0 4 0
          children Shape {
            appearance USE DefLitAppearance
            geometry Sphere { }
          }
        }

        Transform {
          translation 0 0 4
          children Shape {
            appearance Appearance {
              material Material { }
              texture ImageTexture { url "../textures/brick031.jpg" }
            }
            geometry Cone { }
          }
        }

        Transform {
          translation 0 0 -16
          children Shape {
            appearance USE DefLitAppearance
            geometry Sphere { radius 4 }
          }
        }
      ]
    }
  ]
}

Transform {
  children [
    USE LightPointPos
    USE LightPoint
    USE LightSpotPos
    USE LightSpot
    USE Objects
  ]
}

Transform {
  translation 40 0 0
  children [
    USE LightDir
    USE Objects
  ]
}

Transform {
  translation 80 0 0
  children [
    USE LightPointPos
    USE LightPoint
    USE LightSpotPos
    USE LightSpot
    USE LightDir
    USE Objects
  ]
}
