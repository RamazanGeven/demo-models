#VRML V2.0 utf8

# ----------------------------------------------------------------------------
# row 1 - no shader

Group {
  children [

    Shape {
      appearance DEF App1_WithTexture Appearance {
        texture ImageTexture  { url "../../../textures/brick031.jpg" }
        material Material { }
      }
      geometry Sphere { }
    }

    Transform {
      translation 3 0 0
      children
        Shape {
          appearance USE App1_WithTexture
          geometry Box { }
        }
    }

    Transform {
      translation 6 0 0
      children
        Shape {
          appearance DEF App1_NoTexture Appearance {
            material Material { }
          }
          geometry Cylinder { }
        }
    }
  ]
}

# ----------------------------------------------------------------------------
# row 2

Transform {
  translation 0 3 0
  children [

    Shape {
      appearance DEF App2_WithTexture Appearance {
        texture ImageTexture  { url "../../../textures/brick031.jpg" }
        shaders [
          # I don't handle HLSL (and Kambi engine never will, I'm not going
          # to port to M$ Direct X API). This is just to test that
          # such ProgramShader is correctly parsed and ignored.
          ProgramShader {
            language "HLSL"
            programs [
              ShaderProgram { type "VERTEX" }
              ShaderProgram { type "FRAGMENT" }
            ] }
          # Actual test of OpenGL shader.
          DEF CompShader2 ComposedShader {
            language "GLSL"
            parts [
              ShaderPart { type "VERTEX" url "glsl_simple.vert" }
              ShaderPart { type "FRAGMENT" url "glsl_simple.frag" }
            ]
          }
        ]
        material Material { }
      }
      geometry Sphere { }
    }

    Transform {
      translation 3 0 0
      children
        Shape {
          appearance USE App2_WithTexture
          geometry Box { }
        }
    }

    Transform {
      translation 6 0 0
      children
        Shape {
          appearance DEF App2_NoTexture Appearance {
            # Just like AppShaderTestWithTexture, but a little simplified.
            # CompShaderTest is reused, so it should be reused (even though
            # Appearance node is different).
            shaders USE CompShader2
            material Material { }
          }
          geometry Cylinder { }
        }
    }
  ]
}

# ----------------------------------------------------------------------------
# row 3

Transform {
  translation 0 6 0
  children [

    Shape {
      appearance DEF App3_WithTexture Appearance {
        texture ImageTexture  { url "../../../textures/brick031.jpg" }
        shaders [
          # I don't handle HLSL (and Kambi engine never will, I'm not going
          # to port to M$ Direct X API). This is just to test that
          # such ProgramShader is correctly parsed and ignored.
          ProgramShader {
            language "HLSL"
            programs [
              ShaderProgram { type "VERTEX" }
              ShaderProgram { type "FRAGMENT" }
            ] }
          # Actual test of OpenGL shader.
          DEF CompShader3 ComposedShader {
            language "GLSL"
            parts [
              ShaderPart { type "VERTEX" url "glsl_phong_shading.vert" }
              ShaderPart { type "FRAGMENT" url "glsl_phong_shading.frag" }
            ]
          }
        ]
        material Material { }
      }
      geometry Sphere { }
    }

    Transform {
      translation 3 0 0
      children
        Shape {
          appearance USE App3_WithTexture
          geometry Box { }
        }
    }

    Transform {
      translation 6 0 0
      children
        Shape {
          appearance DEF App3_NoTexture Appearance {
            # Just like AppShaderTestWithTexture, but a little simplified.
            # CompShaderTest is reused, so it should be reused (even though
            # Appearance node is different).
            shaders USE CompShader3
            material Material { }
          }
          geometry Cylinder { }
        }
    }
  ]
}

# ----------------------------------------------------------------------------
# row 4

Transform {
  translation 0 9 0
  children [

    Shape {
      appearance DEF App4_WithTexture Appearance {
        texture ImageTexture  { url "../../../textures/brick031.jpg" }
        shaders [
          # I don't handle HLSL (and Kambi engine never will, I'm not going
          # to port to M$ Direct X API). This is just to test that
          # such ProgramShader is correctly parsed and ignored.
          ProgramShader {
            language "HLSL"
            programs [
              ShaderProgram { type "VERTEX" }
              ShaderProgram { type "FRAGMENT" }
            ] }
          # Actual test of OpenGL shader.
          DEF CompShader4 ComposedShader {
            language "GLSL"
            parts [
              ShaderPart { type "VERTEX" url "glsl_toon_shading.vert" }
              ShaderPart { type "FRAGMENT" url "glsl_toon_shading.frag" }
            ]
          }
        ]
        material Material { }
      }
      geometry Sphere { }
    }

    Transform {
      translation 3 0 0
      children
        Shape {
          appearance USE App4_WithTexture
          geometry Box { }
        }
    }

    Transform {
      translation 6 0 0
      children
        Shape {
          appearance DEF App4_NoTexture Appearance {
            # Just like AppShaderTestWithTexture, but a little simplified.
            # CompShaderTest is reused, so it should be reused (even though
            # Appearance node is different).
            shaders USE CompShader4
            material Material { }
          }
          geometry Cylinder { }
        }
    }
  ]
}